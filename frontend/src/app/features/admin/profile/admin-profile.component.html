<div class="bg-white rounded-lg shadow p-6">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-xl font-semibold text-gray-800">
      Mon Profil Administrateur
    </h2>
    <button
      (click)="toggleEditMode()"
      class="px-4 py-2 rounded-lg font-medium transition-colors"
      [ngClass]="
        editMode
          ? 'bg-gray-100 text-gray-600 hover:bg-gray-200'
          : 'bg-blue-600 text-white hover:bg-blue-700'
      "
    >
      {{ editMode ? "Annuler" : "Modifier" }}
    </button>
  </div>

  <div *ngIf="user" class="grid grid-cols-1 md:grid-cols-3 gap-8">
    <!-- Sidebar Info (Avatar) -->
    <div
      class="md:col-span-1 flex flex-col items-center text-center p-4 border rounded-lg bg-gray-50"
    >
      <div
        class="w-32 h-32 rounded-full overflow-hidden bg-blue-600 flex items-center justify-center text-white text-4xl font-bold mb-4 shadow-sm"
      >
        <img
          *ngIf="user.avatarUrl"
          [src]="user.avatarUrl"
          alt="Avatar"
          class="w-full h-full object-cover"
        />
        <span *ngIf="!user.avatarUrl">{{
          (user.name || user.email).charAt(0) | uppercase
        }}</span>
      </div>
      <h3 class="font-bold text-lg text-gray-900">
        {{ user.name || "Admin" }}
      </h3>
      <p class="text-sm text-gray-500">{{ user.email }}</p>
      <span
        class="mt-2 px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-semibold"
      >
        Administrateur
      </span>
    </div>

    <!-- Main Content -->
    <div class="md:col-span-2">
      <!-- Read Mode -->
      <div *ngIf="!editMode" class="space-y-6">
        <div>
          <h4
            class="text-sm font-medium text-gray-500 uppercase tracking-wider mb-1"
          >
            Contact
          </h4>
          <div class="bg-gray-50 p-4 rounded-md">
            <p class="text-gray-900">
              <span class="font-semibold">Email:</span> {{ user.email }}
            </p>
            <p class="text-gray-900 mt-2">
              <span class="font-semibold">Téléphone:</span>
              {{ user.phoneNumber || "Non renseigné" }}
            </p>
          </div>
        </div>

        <div>
          <h4
            class="text-sm font-medium text-gray-500 uppercase tracking-wider mb-1"
          >
            Adresse
          </h4>
          <div class="bg-gray-50 p-4 rounded-md">
            <p class="text-gray-900 whitespace-pre-line">
              {{ user.address || "Non renseignée" }}
            </p>
          </div>
        </div>

        <div>
          <h4
            class="text-sm font-medium text-gray-500 uppercase tracking-wider mb-1"
          >
            Bio
          </h4>
          <div class="bg-gray-50 p-4 rounded-md">
            <p class="text-gray-900 whitespace-pre-line">
              {{ user.bio || "Aucune biographie." }}
            </p>
          </div>
        </div>
      </div>

      <!-- Edit Mode -->
      <form
        *ngIf="editMode"
        [formGroup]="profileForm"
        (ngSubmit)="saveProfile()"
        class="space-y-6"
      >
        <div class="grid grid-cols-1 gap-6">
          <div>
            <label class="block text-sm font-medium text-gray-700"
              >Nom complet</label
            >
            <input
              type="text"
              formControlName="name"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"
            />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700"
              >Téléphone</label
            >
            <input
              type="tel"
              formControlName="phoneNumber"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"
            />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700"
              >URL Avatar</label
            >
            <input
              type="text"
              formControlName="avatarUrl"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"
            />
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700"
              >Adresse</label
            >
            <textarea
              formControlName="address"
              rows="3"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"
            ></textarea>
          </div>

          <div>
            <label class="block text-sm font-medium text-gray-700">Bio</label>
            <textarea
              formControlName="bio"
              rows="4"
              class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border"
            ></textarea>
          </div>
        </div>

        <div class="flex justify-end pt-4">
          <button
            type="submit"
            [disabled]="profileForm.invalid || isSubmitting"
            class="ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"
          >
            {{
              isSubmitting
                ? "Enregistrement..."
                : "Enregistrer les modifications"
            }}
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
